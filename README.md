# DefVKBot
Бот, работающий с сообществом VK - Кондитерская


## Как установить
Сначала склонируйте проект с гит-репозитория себе в локальную папку.
Чтобы развернуть проект на локальном компьютере,
нужно проделать следующие шаги (действия в консоли):
0. Установить и запустить виртуальное окружение (пример для Windows):
```
python -m venv venv
source venv/scripts/activate
```
1. Зайти в каталог showcase
```
cd showcase
```
2. Установить зависимости из файла requirements.txt
```
pip install -r requirements.txt
```
3. Выполниить миграции:
```
python manage.py makemigrations
python manage.py migrate
```
4. Создать суперпользователя. Он будет нужен, чтобы войти в административную панель и получить возможность добавлять разделы кондитерской и продукты
```
python manage.py createsuperuser
```
5. Загрузить фикстуры в БД
```
python manage.py loaddata db.json
```

## Как работает
Перед тем, как проект заработает, необходимо создать файл .env со следующей структурой:
```
SECRET_KEY=c#6*du%how$j8$7(_bl$t1q30d
VK_API_TOKEN=72f80868157bb7557bed87b46e975430de4a
ID_PUBLIC=111
```
SECRET_KEY - специальная последовательность символом для работы Django.
VK_API_TOKEN - секретный токен группы в ВК, администратором которой вы являетесь
ID_PUBLIC - id той группы, с которой связывается бот (чтобы писать от её имени сообщения пользователям)

Шаблон файла с созданным ключом для Django можно получить, запустив setup.py. Остальные данные нужно добавить вручную
```
python setup.py
```

Все данные о продуктах хранятся в базе данных.
Доступ к БД осуществляется через Django ORM.
Чтобы поработать с базой данных, нужно запустить проект:
```
python manage.py runserver
```
После чего можно открыть административную панель в браузере по адресу:
localhost:8000/admin

Для запуска бота необходимо запустить скрипт bot_manager.py
```
python bot_manager.py
```
После появления в консоли сообщения 'Запуск сервера бота' можно начинать пользоваться возможностями бота. Зайдите в группу, напишите в чат 'разделы', и увидите витрину Кондитерской.
